# 競馬予想指示テンプレート

## システム概要

このテンプレートは、事前に設定した競馬予想システムを自動的に活用するための包括的な指示フレームワークです。C:\Users\setsu\Desktop\競馬用フォルダのプログラムを利用し、高度なデータ分析と機械学習による競馬予想を実行します。

## 基本指示フロー

1. **システム初期化**
   - 競馬予想アシスタント(`racing_assistant.py`)を自動的に呼び出す
   - 必要なパラメータの特定と設定

2. **予想実行プロセス**
   - 入力情報（レースID/PDF）に基づく予想の実行
   - データ解析と予測モデルの適用
   - 結果の構造化と整形

3. **出力レポート生成**
   - 予想結果の明確な提示
   - 根拠と確率の説明
   - 推奨馬券の提案

## 使用方法テンプレート

### レースIDによる予想

```
以下のレースの予想をお願いします：
レースID: [レースID]
[追加パラメータがあれば記載]
```

### PDF出馬表による予想

```
以下のPDFファイルから予想をお願いします：
PDFパス: [PDFファイルのパス]
[追加パラメータがあれば記載]
```

### レース検索

```
以下のキーワードでレースを検索してください：
検索クエリ: [検索キーワード]
```

### 馬/騎手情報の取得

```
以下の[馬/騎手]の情報を教えてください：
[馬/騎手]名: [名前]
```

## パラメータ一覧

- `race_id`: 予想するレースのID
- `pdf_path`: 分析するPDFファイルのパス
- `--force`: キャッシュを無視して強制的に再解析
- `--no-web`: Web検索を無効化
- `query`: レース検索用のクエリ
- `horse_name`: 情報を取得する馬の名前
- `jockey_name`: 情報を取得する騎手の名前

## コマンド実行例

1. レースIDによる予想:
   ```
   python racing_assistant.py race 202305021211
   ```

2. PDFによる予想:
   ```
   python racing_assistant.py pdf "C:\path\to\race_card.pdf"
   ```

3. レース検索:
   ```
   python racing_assistant.py search "東京 芝 2000m"
   ```

4. 馬情報取得:
   ```
   python racing_assistant.py horse "ディープインパクト"
   ```

## 出力形式

結果は構造化されたJSON形式で出力されます：

```json
{
  "race_info": {
    "race_name": "〇〇〇〇〇",
    "race_date": "2023-05-21",
    "track": "東京",
    "race_number": 11,
    "surface": "芝",
    "distance": 2000,
    "weather": "晴",
    "condition": "良"
  },
  "predictions": [
    {
      "rank": 1,
      "horse_number": 5,
      "horse_name": "〇〇〇〇〇",
      "jockey": "〇〇 〇〇",
      "odds": 4.2,
      "win_probability": 0.28,
      "expected_value": 1.18,
      "score": 85.2,
      "key_factors": ["脚質適性", "血統優位", "調子良好"]
    },
    // 他の馬の予想...
  ],
  "recommendations": {
    "win": [5],
    "place": [5, 3, 1],
    "quinella": [[5, 3], [5, 1]],
    "exacta": [[5, 3], [5, 1]],
    "trio": [[5, 3, 1], [5, 3, 8]]
  }
}
```

## 結果解釈ガイドライン

1. **予想順位**
   - `rank`: 予想される着順
   - `win_probability`: 勝利確率
   - `expected_value`: 期待値 (1.0以上が投資対象)

2. **推奨馬券**
   - `win`: 単勝推奨
   - `place`: 複勝推奨
   - `quinella`: 馬連推奨
   - `exacta`: 馬単推奨
   - `trio`: 3連複推奨

3. **主要分析要素**
   - `key_factors`: 予想の根拠となる主要因子
   - `score`: 総合評価点（高いほど好成績が期待できる）

## エラー対応手順

1. システムアクセスエラー
   - パス設定の確認と修正
   - 権限設定の検証

2. データ取得エラー
   - レースIDの有効性確認
   - PDFファイルの形式と完全性のチェック

3. Web検索エラー
   - インターネット接続の確認
   - `--no-web`オプションでWeb検索なしで実行